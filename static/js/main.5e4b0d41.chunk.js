(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1292:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(11),i=a.n(o),c=a(1324),l=a(1325),s=a(112),u=a(526),m=a(49),d=a(528),h="USER_LOGGED_IN",p="USER_LOGGED_OUT";var b=Object(s.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return t.user;case p:return{};default:return e}}}),g=a(91),f=a(31),v=a(32),j=a(34),O=a(33),E=a(35),y=a(79),w=a(175),C=a(53),k=a(90),S=a(237),x=a.n(S),L=a(238),N=a.n(L),T=a(151),I=a.n(T),A=a(529),R=a.n(A),B=a(530),F=a.n(B),z=a(531),U=a.n(z),D=a(341),P=a.n(D),W={login:function(e){return P.a.post("/user/login",{credentials:e}).then(function(e){return e.data})},register:function(e){return P.a.post("/user",Object(g.a)({},e)).then(function(e){return e.data})}},G=function(e){return{type:h,user:e}},M=function(e){function t(e){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=R()(F()("anchorEl","updateAnchorEl",null)),t=this.props.handleLogout;return r.a.createElement(e,null,function(e){var a=e.anchorEl,o=e.updateAnchorEl,i=Boolean(a),c=function(){o(null)};return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{"aria-owns":i?"render-props-menu":void 0,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement(U.a,null)),r.a.createElement(N.a,{id:"render-props-menu",anchorEl:a,open:i,onClose:c},r.a.createElement(I.a,{onClick:c},"Profile"),r.a.createElement(I.a,{onClick:c},"My account"),r.a.createElement(I.a,{onClick:function(){t()}},"Logout")))})}}]),t}(n.Component);var _=Object(m.b)(function(e){return{isAuthenticated:!!e.user.username}},{handleLogout:function(){return function(e){localStorage.removeItem("username"),e({type:p})}}})(M),q=a(1318),H=a(532),J=a.n(H),V={root:{position:"relative",flexGrow:1,marginBottom:"105px"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},button:{borderRadius:1,border:0,color:"white",height:15,padding:"0 20px"}},$=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleTitleClick=function(){a.console.log("Title clicked!")},a.handleTitleClick=a.handleTitleClick.bind(Object(w.a)(Object(w.a)(a))),a.state={newValue:""},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.classes,o=a.isLoggedIn;return r.a.createElement("div",{className:n.root},r.a.createElement(C.a,(e={className:n.AppBar},Object(y.a)(e,"className","appbar"),Object(y.a)(e,"style",{position:"fixed",top:"0",width:"100%"}),Object(y.a)(e,"title","Trade Bucket"),Object(y.a)(e,"position","static"),Object(y.a)(e,"onClick",function(){return t.handleTitleClick}),e),r.a.createElement(C.f,null,r.a.createElement(C.g,{variant:"h5",color:"inherit",className:n.grow},r.a.createElement("div",{className:"ui horizontal list"},r.a.createElement("div",{className:"item"},r.a.createElement("img",{className:"ui mini circular image",style:{width:"28px"},src:J.a}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"ui sub grey inverted header"},"Trade"),"I'm addicted to shopping")))),o?r.a.createElement(_,{style:{display:"absolute",justifyContent:"right",alignItems:"right"}}):r.a.createElement(C.d,{style:V.button,variant:"text",color:"inherit",component:function(e){return r.a.createElement(q.a,Object.assign({to:"/login"},e))}},"Login")),r.a.createElement("div",{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"}},o?r.a.createElement(pe,{style:{width:"100%"}}):"")))}}]),t}(n.Component);var K=Object(m.b)(function(e){return{isLoggedIn:!!e.user.username}})(Object(k.withStyles)(V)($)),Q=a(533),X=a.n(Q),Y=a(534),Z=a.n(Y),ee=a(535),te=a.n(ee),ae={stickToBottom:{width:"100%",position:"fixed",bottom:0,margin:"100"}},ne=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.state={value:""},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return r.a.createElement(n.Fragment,null,r.a.createElement(C.b,{value:t,onChange:this.handleChange,style:ae.stickToBottom,showLabels:!0,className:e.root},r.a.createElement(C.c,{label:"Shop",value:"recents",icon:r.a.createElement(X.a,null)}),r.a.createElement(C.c,{label:"Store",value:"favorites",icon:r.a.createElement(Z.a,null)}),r.a.createElement(C.c,{label:"Cart",value:"nearby",icon:r.a.createElement(te.a,null)})))}}]),t}(n.Component),re=Object(k.withStyles)(ae)(ne),oe=a(1320),ie=a(1296),ce=a(174),le=(a(823),a(177)),se=a.n(le),ue=oe.a.Option;function me(e){console.log("onSelect",e)}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(e-t+1))+t}function he(e){return r.a.createElement(ue,{key:e.category,text:e.category},e.query," \u5728",r.a.createElement("a",{href:"https://s.taobao.com/search?q=".concat(e.query),target:"_blank",rel:"noopener noreferrer"},e.category),"\u533a\u5757\u4e2d",r.a.createElement("span",{className:"global-search-item-count"},"\u7ea6 ",e.count," \u4e2a\u7ed3\u679c"))}var pe=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(j.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={dataSource:[]},a.handleSearch=function(e){var t;a.setState({dataSource:e?(t=e,new Array(de(5)).join(".").split(".").map(function(e,a){return{query:t,category:"".concat(t).concat(a),count:de(200,100)}})):[]})},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.searchBar.focus()}},{key:"render",value:function(){var e=this,t=this.state.dataSource;return r.a.createElement("div",{className:"global-search-wrapper",style:{paddingBottom:"3px",paddingTop:"6px",width:290}},r.a.createElement(oe.a,{className:"global-search",size:"large",style:{width:"100%",marginTop:-30,paddingBottom:5},dataSource:t.map(he),onSelect:me,onSearch:this.handleSearch,placeholder:"Search",optionLabelProp:"text",locale:se.a},r.a.createElement(ie.a,{locale:se.a,ref:function(t){e.searchBar=t},suffix:r.a.createElement(ce.a,{type:"search",style:{color:"#6E6E6E",transition:"all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)",fontSize:"16px"},className:"certain-category-icon"})})))}}]),t}(n.Component),be=(n.Component,a(553)),ge=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).state={value:""},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated;return r.a.createElement("div",null,r.a.createElement(C.g,{variant:"h4",style:{paddingTop:"3vh",align:"center",position:"absolute",height:"auto",margin:"10",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)",overflow:"hidden"}},e?"Logged In":"Not Logged In"))}}]),t}(n.Component);var fe=Object(m.b)(function(e){return{isAuthenticated:!!e.user.username}})(ge),ve=a(1319),je=a(1321),Oe=a(1322),Ee=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.text;return r.a.createElement("span",{style:{color:"#ae586"}},e)}}]),t}(n.Component),ye=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).onChange=function(e){a.setState(Object(g.a)({},a.state,{data:Object(g.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value))}))},a.onSubmit=function(e){e.preventDefault();var t=a.validate(a.state.data);a.setState({errors:t}),0===Object.keys(t).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){e.response?a.setState({errors:e.response.data.errors,loading:!1}):a.setState({errors:"Unresponsive",loading:!1})}))},a.validate=function(e){var t={};return e.username||(t.username="Invalid username"),e.password||(t.password="Can't be blank"),t},a.state={data:{username:"",password:""},loading:!1,errors:{}},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.loading;return r.a.createElement("div",null,r.a.createElement(ve.a,{onSubmit:this.onSubmit,style:{paddingTop:"3vh",display:"block",align:"center",position:"absolute",width:"300px",height:"auto",margin:"10",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)"},loading:n},r.a.createElement(C.g,{variant:"h3",style:{paddingBottom:"5px"}},"Login"),a.global&&r.a.createElement(je.a,{negative:!0},r.a.createElement(je.a.Header,null,"Something went wrong"),r.a.createElement("p",null,a.global)),r.a.createElement(ve.a.Field,{error:!!a.username},r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Username",value:t.username,onChange:this.onChange}),a.username&&r.a.createElement(Ee,{text:a.username})),r.a.createElement(ve.a.Field,{error:!!a.password},r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",value:t.password,onChange:this.onChange}),a.password&&r.a.createElement(Ee,{text:a.password})),r.a.createElement("div",{className:"ui buttons"},r.a.createElement(Oe.a,{primary:!0,className:"ui left attached button",onClick:this.onSubmit},"Login"),r.a.createElement(Oe.a,{secondary:!0,className:"right attached ui button",as:q.a,to:"/register",onClick:function(){}},"Register"))))}}]),t}(n.Component),we=Object(m.b)(null,{})(ye),Ce=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).submit=function(e){return a.props.login(e).then(function(){return a.props.history.push("/shop")})},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(we,{submit:this.submit}))}}]),t}(n.Component),ke=Object(m.b)(null,{login:function(e){return function(t){return W.login(e).then(function(e){localStorage.username=e.username,t(G(e))})}}})(Ce),Se=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(je.a,{warning:!0},r.a.createElement(je.a.Header,null,"Account deactivated"),"Please contact an administrator at hello@trade.com.")}}]),t}(n.Component),xe={wrapper:{padding:15,boxSizing:"border-box",width:"100%",height:"100vh"}},Le=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActivated,a=e.name;return r.a.createElement(n.Fragment,null,!t&&r.a.createElement(Se,null),r.a.createElement(C.g,{variant:"h5",align:"left",style:xe.wrapper},"Welcome, ",a))}}]),t}(n.Component),Ne=Object(m.b)(function(e){return{isActivated:!!e.user.username,name:localStorage.getItem("username")}})(Object(k.withStyles)(xe)(Le)),Te=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).onChange=function(e){a.setState(Object(g.a)({},a.state,{data:Object(g.a)({},a.state.data,Object(y.a)({},e.target.name,e.target.value))}))},a.onSubmit=function(e){e.preventDefault();var t=a.validate(a.state.data);a.setState({regErrors:t}),0===Object.keys(t).length&&(a.setState({loading:!0}),a.props.submit(a.state.data))},a.validate=function(e){var t={};return e.username||(t.username="Can't be blank"),e.password||(t.password="Can't be blank"),e.name||(t.name="Can't be blank"),t},a.state={data:{username:"",password:"",name:""},loading:!1,regErrors:{}},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.regErrors,n=e.loading;return r.a.createElement(ve.a,{style:{paddingTop:"3vh",display:"block",align:"center",position:"absolute",width:"300px",height:"auto",margin:"10",top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)"},onSubmit:this.onSubmit,loading:n},r.a.createElement(C.g,{variant:"h3",style:{paddingBottom:"3px"}},"Register"),r.a.createElement(ve.a.Field,{error:!!a.name},r.a.createElement("label",{htmlFor:"name"},"First Name"),r.a.createElement("input",{style:{fontSize:16},type:"text",id:"name",name:"name",placeholder:"Name",value:t.name,onChange:this.onChange}),a.name&&r.a.createElement(Ee,{text:a.name})),r.a.createElement(ve.a.Field,{error:!!a.username},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{style:{fontSize:16,paddingRight:5},type:"text",id:"username",name:"username",placeholder:"Username",value:t.username,onChange:this.onChange}),a.username&&r.a.createElement(Ee,{text:a.username})),r.a.createElement(ve.a.Field,{error:!!a.password},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{style:{fontSize:16,paddingRight:5},type:"password",id:"password",name:"password",placeholder:"Password",value:t.password,onChange:this.onChange}),a.password&&r.a.createElement(Ee,{text:a.password})),r.a.createElement(Oe.a,{primary:!0},"Register"))}}]),t}(n.Component),Ie=Object(m.b)(null,{})(Te),Ae=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).submit=function(e){return a.props.register(e).then(function(){return a.props.history.push("/shop")})},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ie,{submit:this.submit}))}}]),t}(n.Component),Re=Object(m.b)(null,{register:function(e){return function(t){return W.register(e).then(function(e){t(G(e))})}}})(Ae),Be=a(249),Fe=a(1323),ze=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.component,n=Object(Be.a)(e,["isLoggedIn","component"]);return r.a.createElement(l.a,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(Fe.a,{to:"/login"})}}))}}]),t}(n.Component);var Ue=Object(m.b)(function(e){return{isLoggedIn:!!e.user.username}})(ze),De=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=e.component,n=Object(Be.a)(e,["isLoggedIn","component"]);return r.a.createElement(l.a,Object.assign({},n,{render:function(e){return t?r.a.createElement(Fe.a,{to:"/login"}):r.a.createElement(a,e)}}))}}]),t}(n.Component);var Pe=Object(m.b)(function(e){return{isLoggedIn:!!e.user.username}})(De);var We=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(j.a)(this,Object(O.a)(t).call(this,e))).state={data:[{username:"loading"}]},a}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:Object(g.a)({},function(){var e=localStorage.getItem("username");return e?{Authorization:e}:{Authorization:"admin"}}())};fetch("/users/",t).then(function(e){return e.json()}).then(function(t){return e.setState({data:t})})}},{key:"render",value:function(){var e=this.props.location;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh",height:"100vh",width:"100vw"}},r.a.createElement(be.LocaleProvider,{locale:se.a},r.a.createElement(K,null)),r.a.createElement("div",{className:"ui container"},r.a.createElement("main",{style:{flex:1,display:"flex",overflow:"scroll",flexDirection:"column",backgroundColor:"lavender"}},r.a.createElement(l.a,{location:e,path:"/",exact:!0,component:fe}),r.a.createElement(Pe,{location:e,path:"/login",exact:!0,component:ke}),r.a.createElement(Pe,{location:e,path:"/register",exact:!0,component:Re}),r.a.createElement(Ue,{location:e,path:"/shop",exact:!0,component:Ne}))),r.a.createElement(re,null))}}]),t}(n.Component),Ge=(a(1288),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Me(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var _e=Object(s.createStore)(b,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(d.a)));if(localStorage.username){var qe={username:localStorage.username};_e.dispatch(G(qe))}i.a.render(r.a.createElement(c.a,null,r.a.createElement(m.a,{store:_e},r.a.createElement(l.a,{component:We}))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tradefrontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/tradefrontend","/service-worker.js");Ge?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Me(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Me(t,e)})}}()},532:function(e,t,a){e.exports=a.p+"static/media/shopping-bag-flat.eeb09a15.png"},670:function(e,t,a){e.exports=a(1292)}},[[670,2,1]]]);
//# sourceMappingURL=main.5e4b0d41.chunk.js.map